<!doctype html>
<html layout:decorate="~{_layout}">
<head>
    <title>title</title>
</head>
<body>
<div layout:fragment="content">
    <div class="row">
        <div class="col-12">
            <h3 th:text="|Event page for: ${event.name}, ${event.auditorium.name}|"></h3>
            <p sec:authorize="hasAuthority('BOOKING_MANAGER')"><a
                    th:href="@{${#httpServletRequest.requestURI + '/tickets'}}">View purchased tickets</a></p>
            <p>Available seats:</p>
            <div class="row justify-content-around">
                <div class="col-md-4">
                    <div class="seats-container mb-2"
                         th:attr="data-event=${event.id}, data-url=${#httpServletRequest.requestURI}">
                        <div class="d-flex flex-wrap">
                            <div th:each="seat : ${@viewUtils.getSeatViews(event)}">
                                <div class="seat-item" th:attr="data-id=${seat.number}"
                                     th:classappend="${seat.booked ? 'seat-booked' : 'seat-free'}  + ' ' + ${seat.vip ? 'seat-vip' : ''} ">
                                    <span th:text="${seat.number}"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="book-tickets btn btn-success">Book tickets</button>
                </div>
                <div class="col-md-5">
                    <div class="card bg-secondary text-white p-3">
                        <p>Preview tickets:</p>
                        <ul class="preview-price-tickets"></ul>
                        <strong>Total price: <span class="preview-price-total"></span></strong>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="cloneable" class="d-none">
        <ul>
            <li>
                <span class="preview-ticket-body"></span><br>
                <span class="preview-ticket-discount"></span>
            </li>
        </ul>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel"></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script src="/static/js/bookTickets.js"></script>
</div>
</body>
</html>